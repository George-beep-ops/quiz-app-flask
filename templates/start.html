{% extends "base.html" %}

{% block title %}Startseite{% endblock %}

{% block extra_style %}
<style>
  h1 {
    font-size: 2rem;
    margin: 1.5rem 0;
  }
  form {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
  }
  input[type="text"] {
    padding: 0.6rem;
    font-size: 1rem;
    border-radius: 6px;
    border: 1px solid #ccc;
    width: 80%;
    max-width: 400px;
  }
  button {
    padding: 0.6rem 1.2rem;
    font-size: 1rem;
    background-color: #004080;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  button:hover {
    background-color: #003060;
  }
</style>
{% endblock %}

{% block content %}
  <h1>Welcome to the Quiz!</h1>

  <p style="font-size: 1rem; font-weight: bold; max-width: 500px; margin-top: 0.5rem; margin-bottom: 2rem; text-align: center;">
    Test your knowledge and try to win the games. Each correct answer is worth one point, each wrong answer 0 points.
  </p>

  <form id="startForm" method="POST">
    <input type="text" name="nickname" id="nickname" placeholder="Your name or nickname" required>
    <button type="button" onclick="validateAndStart()">Start quiz</button>
  </form>
{% endblock %}

{% block script %}
<script>
function validateAndStart() {
  const nameInput = document.getElementById("nickname");
  if (!nameInput.value.trim()) {
    alert("Please enter your name or nickname.");
    nameInput.focus();
    return;
  }

  if (
    typeof DeviceMotionEvent !== 'undefined' &&
    typeof DeviceMotionEvent.requestPermission === 'function'
  ) {
    DeviceMotionEvent.requestPermission()
      .then(permissionState => {
        if (permissionState === 'granted') {
          document.getElementById('startForm').submit();
        } else {
          alert('Without permission the games wont work.');
        }
      })
      .catch(console.error);
  } else {
    // Kein iOS oder keine Erlaubnis n√∂tig
    document.getElementById('startForm').submit();
  }
}
</script>
{% endblock %}




